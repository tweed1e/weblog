---
title: "Parliament's gender problem"
author: "Jesse Tweedle"
date: '2018-02-14'
slug: parliament-gender
categories: ["r"]
tags: ["r", "canada", "parliament", "gender", "bias", "text analysis", "hansard"]
description: 'A look at digital copies of Canadian parliamentary debates 1994--2017, showing gender imbalance in both number of speakers and time pattern of speakers.'
image: "https://jesse.tw/images/circle-arrows.png"
---

<script src="/rmarkdown-libs/kePrint/kePrint.js"></script>


<p>(Preface: I‚Äôm üá®üá¶ but idk anything about parliament and dk what a hansard was before I started this. So if you see something wrong, get the <a href="https://github.com/tweed1e/weblog/blob/master/content/post/2018-02-14-parliament-gender.Rmd">code from github</a> and diy!)</p>
<div id="summary" class="section level2">
<h2>Summary</h2>
<ol style="list-style-type: decimal">
<li>Women make up <a href="http://www.cbc.ca/news2/interactives/women-politics/">20-25% of Parliament</a></li>
<li>Number of words spoken by women increases from 1994‚Äì2017 from 15% to 28%</li>
<li>Increase mainly comes from doubling involvement in routine government business</li>
<li>Nice to have Trudeau‚Äôs <a href="http://www.cbc.ca/news2/interactives/women-politics/">gender-balanced cabinet</a>, but female MPs are also becoming more involved in day-to-day operations</li>
</ol>
<p><a href="#dayplot">(Click to skip to the important pictures.)</a></p>
</div>
<div id="motivation" class="section level2">
<h2>Motivation</h2>
<p>When it comes to equality, Canada likes to talk a big game. What really happens in Parliament? Of course Trudeau likes to play up his female cabinet (extra props go to Chrystia Freeland for not capitulating to that weird Belgian area that was <a href="http://www.cbc.ca/news/politics/canada-eu-ceta-brussels-friday-1.3815332">holding up the Canada-EU trade agreement</a>, and I hope she can handle <a href="http://www.cbc.ca/news/politics/freeland-nafta-fifth-round-prepare-for-worst-1.4412673">you-who-know and NAFTA too</a>, although she switched from trade to foreign affairs).</p>
<p>But you don‚Äôt need to take anyone‚Äôs word for it; we have data on gender and parliament. What does it say? On one hand, we just set a <a href="https://en.wikipedia.org/wiki/Women_in_the_42nd_Canadian_Parliament">record for female MPs in the 2015 election</a>! On the other hand, that record is still only 26%. Uh. Not great. But that‚Äôs only part of the story. A gender-balance cabinet helps (Trudeau appointed 15 female ministers out of a 30 minister cabinet). <em>But what actually happens when parliament gets down to business?</em></p>
</div>
<div id="the-data-httpsopenparliament.ca" class="section level2">
<h2>The data: <a href="https://openparliament.ca/" class="uri">https://openparliament.ca/</a></h2>
<p><a href="https://github.com/michaelmulley">Michael Mulley</a> (not a government employee, that would be too obvious) gathered all the parliament data and made a website! You can go to the site or the <a href="https://github.com/michaelmulley/openparliament">project‚Äôs github page</a> to see what‚Äôs up. There‚Äôs an API to access the data, but I had no idea how parliament works or what I was looking for, so I <a href="https://openparliament.ca/data-download/">downloaded a PostgreSQL</a> copy of the database to go through on my own. It‚Äôs about 4GB.</p>
<div id="setup-postgres-and-the-database" class="section level3">
<h3>Setup postgres and the database</h3>
<p>To get the data into R, you need to</p>
<ol style="list-style-type: decimal">
<li>setup a local postgres database,</li>
<li>copy the table to the database,</li>
<li>connect to the database from R</li>
<li>and read the table you‚Äôd like</li>
</ol>
<p>First, I didn‚Äôt have postgres. So google <a href="https://www.codementor.io/engineerapart/getting-started-with-postgresql-on-mac-osx-are8jcopb">like mad</a> and get super frustrated, then finally settle on this strat:</p>
<pre><code>$ brew install postgresql
$ createdb -T template0 openparl
$ psql openparl &lt; openparliament.public.sql</code></pre>
<p>The first one installs postgresql; the next creates the database <code>openparl</code> that I‚Äôll put the data in, and the last one dumps the data I downloaded from the website into the database! Done and done. Now open <code>psql</code> and try to look at what‚Äôs inside:</p>
<pre><code>$ psql postgres
postgres-# \list
   Name    |    Owner     | Encoding |   Collate   |    Ctype    |       Access privileges
-----------+--------------+----------+-------------+-------------+-------------------------------
 openparl  | jessetweedle | UTF8     | en_US.UTF-8 | en_US.UTF-8 |
 postgres  | jessetweedle | UTF8     | en_US.UTF-8 | en_US.UTF-8 |
 template0 | jessetweedle | UTF8     | en_US.UTF-8 | en_US.UTF-8 | =c/jessetweedle              +
           |              |          |             |             | jessetweedle=CTc/jessetweedle
 template1 | jessetweedle | UTF8     | en_US.UTF-8 | en_US.UTF-8 | =c/jessetweedle              +
           |              |          |             |             | jessetweedle=CTc/jessetweedle
(4 rows)</code></pre>
<p>It‚Äôs there! It worked ffs! Next, connect to the database and list contents (I‚Äôll show only a few results)</p>
<pre><code>postgres-# \connect openparl
openparl-# \dt
                            List of relations
 Schema |                   Name                   | Type  |    Owner
--------+------------------------------------------+-------+--------------
 public | accounts_logintoken                      | table | jessetweedle
 public | accounts_user                            | table | jessetweedle
 public | activity_activity                        | table | jessetweedle
 public | alerts_politicianalert                   | table | jessetweedle
...(lots more)...
(64 rows)</code></pre>
<p>It turns out the two databases we‚Äôre looking for are <code>hansard_statement</code> (the parliament transcripts) and <code>core_politician</code> (for politician gender data). Now all we have to do is leave that running and connect to that table from R! (Aside: the R tutorials can be super frustrating, because they assume you‚Äôve got the database part worked out already‚Äîno! that‚Äôs the only part I need!)</p>
</div>
<div id="hansard" class="section level3">
<h3>Hansard</h3>
<p>A <a href="https://en.wikipedia.org/wiki/Hansard">hansard</a> is non-verbatim transcript of parliamentary proceedings. Aside: Canada is bilingual, so MPs can speak in either official language, and the Hansard will record which language is spoken, and later translate from one to the other for the official record. Which led to this gem:</p>
<blockquote>
<p>‚Ä¶during a Liberal filibuster in the Canadian Senate, Senator Philippe Gigant√®s was accused of reading one of his books only so that he could get the translation for free through the Hansard. (<a href="https://en.wikipedia.org/wiki/Hansard#cite_ref-16">Wikipedia</a>).</p>
</blockquote>
<p>So, we have a record of who speaks at what time during every session of parliament. Let‚Äôs take a look at the <code>hansard_statement</code> in the open parliament database.</p>
</div>
<div id="import-data-into-r-and-explore" class="section level3">
<h3>Import data into R and explore</h3>
<p>Now that we‚Äôre back home in R, let‚Äôs do our regular warm-up exercises:</p>
<pre class="r"><code>library(RPostgreSQL)  # to access database
library(tidyverse)    # to tidy things
library(viridis)      # bc I like the colours
library(lubridate)    # to deal with times. also need `hms` library too.</code></pre>
<p>Now, let‚Äôs get the data:</p>
<pre class="r"><code>con &lt;- dbConnect(dbDriver(&quot;PostgreSQL&quot;),
                 dbname = &quot;openparl&quot;,
                 host = &quot;localhost&quot;,
                 user = &quot;jessetweedle&quot;, password = &quot;&quot;)</code></pre>
<p>This is mainly ‚åò+C/‚åò+V from <a href="https://www.r-bloggers.com/getting-started-with-postgresql-in-r/">an r-bloggers post</a> by someone named <a href="https://www.linkedin.com/in/david-zimmermann-76a737a4/">David Zimmerman</a>. Thanks David.</p>
<p>I had to write <code>&quot;openparl&quot;</code> as the <code>dbname</code> because that‚Äôs the name of the new local database I created to store the tables; <code>host</code> is local, and <code>user</code> is the name automatically given to me when I set up <code>psql</code>, and the default password is empty.</p>
<p>Now let‚Äôs check out the tables; you can modify this code to get all the tables in this database, but I‚Äôm focusing on ones with <code>&quot;hansard&quot;</code> in them (because I‚Äôve already written all the code and I know what I need!):</p>
<pre class="r"><code>tbl_query &lt;- &quot;SELECT *
              FROM pg_tables
              WHERE schemaname=&#39;public&#39;;&quot;

dbGetQuery(con, tbl_query) %&gt;%
  as_tibble() %&gt;%
  select(schemaname, tablename, tableowner) %&gt;%
  filter(grepl(&quot;hansard&quot;, x = tablename))
# A tibble: 5 x 3
#   schemaname tablename                                tableowner
#   &lt;chr&gt;      &lt;chr&gt;                                    &lt;chr&gt;
# 1 public     hansards_document                        jessetweedle
# 2 public     hansards_statement                       jessetweedle
# 3 public     hansards_statement_bills                 jessetweedle
# 4 public     hansards_statement_mentioned_politicians jessetweedle
# 5 public     hansards_oldsequencemapping              jessetweedle</code></pre>
<p>Now just check out the ones we want, and save them to a <code>tibble</code>. First, let‚Äôs just have a look at <code>hansard_statements</code> just to check it out:</p>
<pre class="r"><code>test_query &lt;-  &quot;SELECT *
                FROM hansards_statement
                LIMIT 20;&quot;

df &lt;- dbGetQuery(con, test_query) %&gt;% as_tibble()
df %&gt;% print(n = 5)
# A tibble: 20 x 27
#        id document_id time                h1_en  h2_en member_id who_en content_en   sequence
#  *  &lt;int&gt;       &lt;int&gt; &lt;dttm&gt;              &lt;chr&gt;  &lt;chr&gt;     &lt;int&gt; &lt;chr&gt;  &lt;chr&gt;           &lt;int&gt;
#  1 645328         388 2008-02-14 13:15:00 Routi‚Ä¶ Ques‚Ä¶        NA &quot;&quot;     &quot;&lt;p class=\‚Ä¶       86
#  2 232373        1878 2001-05-03 13:50:00 Gover‚Ä¶ Fede‚Ä¶      2611 Ms. M‚Ä¶ &lt;p&gt;Mr. Spea‚Ä¶       89
#  3 170961         944 1999-05-10 16:05:00 Gover‚Ä¶ Inco‚Ä¶      3066 Mr. G‚Ä¶ &quot;&lt;p&gt;Mr. Spe‚Ä¶      210
#  4  27684        1138 1994-11-18 10:00:00 &quot;&quot;     Priv‚Ä¶        NA The S‚Ä¶ &quot;&lt;p&gt;My coll‚Ä¶        0
#  5 645329         388 2008-02-14 13:15:00 Routi‚Ä¶ Ques‚Ä¶      1534 Mr. T‚Ä¶ &quot;&lt;p data-Ho‚Ä¶       87
# # ... with 15 more rows, and 18 more variables: wordcount &lt;int&gt;, politician_id &lt;int&gt;,
# #   procedural &lt;lgl&gt;, h3_en &lt;chr&gt;, who_hocid &lt;int&gt;, content_fr &lt;chr&gt;, statement_type &lt;chr&gt;,
# #   written_question &lt;chr&gt;, source_id &lt;chr&gt;, who_context_en &lt;chr&gt;, slug &lt;chr&gt;,
# #   urlcache &lt;chr&gt;, h1_fr &lt;chr&gt;, h2_fr &lt;chr&gt;, h3_fr &lt;chr&gt;, who_fr &lt;chr&gt;,
# #   who_context_fr &lt;chr&gt;, wordcount_en &lt;int&gt;</code></pre>
<p>Data so cool. Thank you again <a href="https://twitter.com/michaelmulley?lang=en">Michael</a>.</p>
<pre class="r"><code>data_query &lt;- &quot;SELECT time, h1_en, h2_en, h3_en, who_en, politician_id,
                  wordcount, who_hocid, who_context_en, name, gender
          FROM hansards_statement
          LEFT JOIN core_politician
          ON hansards_statement.politician_id = core_politician.id
          ORDER BY time, sequence;&quot;

han_df &lt;- dbGetQuery(con, data_query) %&gt;% as_tibble()
han_df %&gt;% print(n = 5)
# A tibble: 2,297,140 x 11
#   time                h1_en h2_en     h3_en who_en        politician_id wordcount who_hocid
#   &lt;dttm&gt;              &lt;chr&gt; &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;                 &lt;int&gt;     &lt;int&gt;     &lt;int&gt;
# 1 1994-01-17 11:00:00 &quot;&quot;    &quot;&quot;        &quot;&quot;    &quot;&quot;                       NA       301        NA
# 2 1994-01-17 11:25:00 &quot;&quot;    &quot;&quot;        &quot;&quot;    The Clerk of‚Ä¶            NA        27        NA
# 3 1994-01-17 11:25:00 &quot;&quot;    Election‚Ä¶ &quot;&quot;    The Presidin‚Ä¶            NA       134        NA
# 4 1994-01-17 11:25:00 &quot;&quot;    Election‚Ä¶ &quot;&quot;    Mr. Nunziata           4892        40        NA
# 5 1994-01-17 11:25:00 &quot;&quot;    Election‚Ä¶ &quot;&quot;    The Presidin‚Ä¶            NA       289        NA
# ... with 2.297e+06 more rows, and 3 more variables: who_context_en &lt;chr&gt;, name &lt;chr&gt;, gender &lt;chr&gt;</code></pre>
<p>Cool, the two things I want (for now) are <code>time</code> and <code>who_en</code>.</p>
</div>
</div>
<div id="analysis" class="section level2">
<h2>Analysis</h2>
<p>First, an overview of the data we‚Äôre going to work with.</p>
<pre class="r"><code>han_df &lt;- read_csv(&quot;han_df.zip&quot;)
han_df &lt;- han_df %&gt;% mutate(time = with_tz(time, &quot;America/Toronto&quot;))
han_df %&gt;% sample_n(5) # an easy way to look at a random sample of observations instead of just the first 10
## # A tibble: 5 x 11
##   time                h1_en h2_en h3_en who_en politician_id wordcount
##   &lt;dttm&gt;              &lt;chr&gt; &lt;chr&gt; &lt;lgl&gt; &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;
## 1 2010-10-27 16:40:00 &lt;NA&gt;  &lt;NA&gt;  NA    Ms. J‚Ä¶            NA         1
## 2 2007-11-15 09:20:00 &lt;NA&gt;  &lt;NA&gt;  NA    Mr. P‚Ä¶           308         6
## 3 2011-11-01 12:50:00 &lt;NA&gt;  &lt;NA&gt;  NA    Mr. G‚Ä¶            NA        68
## 4 2013-01-30 14:50:00 Oral‚Ä¶ Agri‚Ä¶ NA    Ms. R‚Ä¶          8479        88
## 5 2014-05-01 09:30:00 &lt;NA&gt;  &lt;NA&gt;  NA    Mr. A‚Ä¶            NA       274
## # ‚Ä¶ with 4 more variables: who_hocid &lt;lgl&gt;, who_context_en &lt;lgl&gt;,
## #   name &lt;chr&gt;, gender &lt;chr&gt;</code></pre>
<p>Ok, now we‚Äôre getting somewhere. I want to check two things: (1) what does the time distribution look like? and (2) can we get the gender of the MPs from names? We got genders from the politician database, but there are some sanity checks we‚Äôll need. Leave that for later.</p>
<div id="cycles-of-activity" class="section level3">
<h3>Cycles of activity</h3>
<p>So, the time distribution:</p>
<p><img src="/post/2018-02-14-parliament-gender_files/figure-html/unnamed-chunk-7-1.png" width="768" /></p>
<p>There are cycles of activity; it picks up when session begins, drops off from 1 to 4, then jumps up from 4-5. There are obvious patterns to the activity in the Hansard that definitely correspond to the daily schedule of parliament. Keep that in mind for later. At this stage, we just want to know that the data make sense. There are some outliers left off the graph (e.g., filibustering that lasts through the night).</p>
</div>
<div id="gender-imbalance-in-parliament-overall-stats" class="section level3">
<h3>Gender (im)balance in Parliament: overall stats</h3>
<p>From our exploratory analysis before, we know that there is often a gendered title associated with the name, along with the gender given by the politician database. As a first stab to sanity check and validate the data, just call names with ‚ÄúMr.‚Äù (and French equivalents) Male, and names with ‚ÄúMrs.‚Äù (and other English and French equivalents) Female. (This has its own problems‚Äîin a few cases, the hansard specifies that a woman is speaking on behalf of a man, and vice versa.) Putting these two things together gives us a more accurate measure of gender.</p>
<pre class="r"><code>words_gender &lt;- words %&gt;% 
  filter(who_en != &quot;&quot;) %&gt;%
  mutate(gender_x = case_when(
    grepl(&quot;(Mr\\.|M\\.)&quot;, x = who_en) ~ &quot;M&quot;,
    grepl(&quot;(Mrs\\.|Ms\\.|Miss|Mlle\\.|Mme\\.)&quot;, x = who_en) ~ &quot;F&quot;,
    TRUE ~ &quot;&quot;)) %&gt;% 
  mutate(gender = ifelse(is.na(gender) | (gender_x != gender &amp; gender_x != &quot;&quot;), gender_x, gender)) %&gt;% 
  filter(gender != &quot;&quot;)
words_gender %&gt;% select(who_en, gender, gender_x) %&gt;% sample_n(5)
## # A tibble: 5 x 3
##   who_en                                 gender gender_x
##   &lt;chr&gt;                                  &lt;chr&gt;  &lt;chr&gt;   
## 1 Mr. Fin Donnelly                       M      M       
## 2 Mr. Adam Fanaki                        M      M       
## 3 Mr. Ahmadshah Malgarai                 M      M       
## 4 Mr. Scott Simms                        M      M       
## 5 The Acting Speaker (Mr. Andrew Scheer) M      M</code></pre>
Ok, that‚Äôs not bad; now what are the overall statistics?
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Gender
</th>
<th style="text-align:right;">
N
</th>
<th style="text-align:right;">
Freq
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
F
</td>
<td style="text-align:right;">
59715433
</td>
<td style="text-align:right;">
22.7%
</td>
</tr>
<tr>
<td style="text-align:left;">
M
</td>
<td style="text-align:right;">
203399873
</td>
<td style="text-align:right;">
77.3%
</td>
</tr>
</tbody>
</table>
<p>Not great. Does it change over time? We know 2015 was a record breaking election for female candidates; on the other hand, the previous record was 1993. So in between: ü§∑.</p>
<p><img src="/post/2018-02-14-parliament-gender_files/figure-html/unnamed-chunk-10-1.png" width="768" /></p>
<p>Whoops. There‚Äôs an obvious break in the series for Count‚Äîso something happened to the data collection or the structure of the hansard (it‚Äôs less likely that parliament itself changed significantly at that time). On the plus side, women get more words in Parliament over time!</p>
</div>
<div id="dayplot" class="section level3">
<h3>Gender (im)balance in Parliament: time and day patterns</h3>
<p><img src="/post/2018-02-14-parliament-gender_files/figure-html/unnamed-chunk-11-1.png" width="768" /></p>
<p>Wow. That‚Äôs a pattern I didn‚Äôt expect‚Äîthere‚Äôs a spike at 2:00PM from Monday-Thursday, but not Friday. Weird. That cyclical activity pattern we noted before probably explains some of this. There‚Äôs some information on this in the dataset (under the original heading <code>h1_en</code>), but it‚Äôs not very consistent (different capitalization, spelling, naming conventions).</p>
<p>So let‚Äôs do some googling to find <a href="https://www.ourcommons.ca/About/Schedules/DailyOrderOfBusiness-e.html">Parliament‚Äôs daily order of business</a>. Mon-Thurs at 2:00PM (and Friday at 11:00AM) is time for ‚ÄúStatements from Members‚Äù! That‚Äôs where all the spikes are! Which means women are speaking at the time each member can get exactly one minute to speak on any topic. It‚Äôs also relatively high at 2:30 (same days), which is Question Period! They‚Äôre talking and asking questions at the times they are allowed to do so. But they‚Äôre not speaking during regular government business.</p>
<p>Let‚Äôs save that data as a csv file, read it in and join it to the data.</p>
<p><img src="/post/2018-02-14-parliament-gender_files/figure-html/unnamed-chunk-12-1.png" width="768" /></p>
<p>Wow‚ÄîStatements by Members is constant (matching the relative number of female MPs), but the % of words spoken by women has during routine business has doubled over time! Let‚Äôs take a look at the deeper categories of business:</p>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="border-bottom:hidden" colspan="1">
</th>
<th style="border-bottom:hidden; padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
% female words
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
Session Type
</th>
<th style="text-align:right;">
1994
</th>
<th style="text-align:right;">
2017
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Adjournment Proceedings
</td>
<td style="text-align:right;">
16.72%
</td>
<td style="text-align:right;">
25.88%
</td>
</tr>
<tr>
<td style="text-align:left;">
Government Orders
</td>
<td style="text-align:right;">
17.07%
</td>
<td style="text-align:right;">
26.85%
</td>
</tr>
<tr>
<td style="text-align:left;">
Oral Questions
</td>
<td style="text-align:right;">
14.59%
</td>
<td style="text-align:right;">
29.60%
</td>
</tr>
<tr>
<td style="text-align:left;">
Private Members‚Äô Business
</td>
<td style="text-align:right;">
20.02%
</td>
<td style="text-align:right;">
24.67%
</td>
</tr>
<tr>
<td style="text-align:left;">
Review of Delegated Legislation
</td>
<td style="text-align:right;">
0%
</td>
<td style="text-align:right;">
21.09%
</td>
</tr>
<tr>
<td style="text-align:left;">
Statements by Members
</td>
<td style="text-align:right;">
23.57%
</td>
<td style="text-align:right;">
25.16%
</td>
</tr>
</tbody>
</table>
<p>Dang. Alright. The ratio of female speakers in parliament doubles at times off of regular government business‚Äîsuggesting they are not involved in the actual running of the government (from this data, we can‚Äôt tell whether that‚Äôs by choice of the individuals or by design of those in power; you be the judge). Then they jump up when they can (‚Äòstatements by members‚Äô, ‚Äòoral questions‚Äô and ‚Äòadjournment proceedings‚Äô are all made up on short one minute statements and question period).</p>
<p>That‚Äôs it. Parliament‚Äôs gender power imbalance is still poor, but has improved over time:</p>
<ol style="list-style-type: decimal">
<li>Women make up 20-25% of Parliament</li>
<li>Number of words spoken by women increases from 1994‚Äì2017 from 15% to 28%</li>
<li>Increase mainly comes from doubling involvement in routine government business</li>
</ol>
<p>And that‚Äôs before we get to the words! Who knows what these people are actually saying? <a href="https://github.com/juliasilge/tidytext">tidytext</a> does! And after writing this, I found out about <a href="https://www.lipad.ca/data/">Linked Parliamentary Data Project (LiPaD)</a> at the University of Toronto, an even larger historical digital source of Canadian Hansards. Who knows what we can come up with!</p>
</div>
</div>
